<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>set</title>
</head>
<body>
<script>
    // 集合set: 无重复值的有序列表
    let set = new Set();
    console.log(set);  // Set(0) {size: 0}
    // 添加
    set.add('a');
    set.add('c');
    set.add('b');
    set.add('d');
    set.add('d');
    console.log(set); // Set(4) {'a', 'c', 'b', 'd'}
    // 删除
    set.delete('d')
    console.log(set); // Set(3) {'a', 'c', 'b'}
    // 判断是否包含
    console.log(set.has('a'));
    // 集合大小
    console.log(set.size);
    // 遍历
    set.forEach((val,key)=>{
        console.log(val);
        console.log(key); // val key的输出相同
    })
    // set转数组
    let arr = [...set];
    console.log(arr); // ['a', 'c', 'b']
    // 数组转set
    let set2 = new Set([1,2,1]);
    console.log(set2); // Set(2) {1, 2}

    // set 中对对象的引用无法被释放
    let set3 = new Set(), obj1 = {};
    set3.add(obj1);
    obj1 = null; // 释放当前资源
    console.log(set3); // [[Entries]] 0: Object
    // 使用weakset解决
    let set4 = new WeakSet(), obj2 = {};
    set4.add(obj2);
    obj2 = null; // 释放当前资源
    console.log(set4); //  [[Entries]] 无属性

    // WeakSet
    // 1. 不能传入非对象类型的参数
    // 2. 不可迭代
    // 3. 没有forEach()
    // 4. 没有size
</script>
</body>
</html>