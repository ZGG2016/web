# 功能界面的组件化编码流程（通用）

[TOC]

来自：[https://www.bilibili.com/video/BV1wy4y1D7JT?p=55](https://www.bilibili.com/video/BV1wy4y1D7JT?p=55)

### 1 拆分组件

拆分界面，抽取组件。

可以先将完整的 html 的内容复制到 App.js 下 ，并新建一个 css 文件，放对应的样式，初步查看下结构。

然后将 `class=` 改为 `className=`,再修改 `style` 的格式为 `{{...}}`.

要注意看根节点的 id 是不是 root.

此时，可以启动，查看下页面。

可以通过编辑器的展开和收起代码的功能，查看页面结构，从而确定拆分的组件。

然后在项目下分别建好各组件的目录。

对于样式结构写的很乱的情况，拆分就有点困难。最好就是一个组件的样式写在一起。

### 2 实现静态组件

使用组件实现静态页面效果。将拆分后的各代码放到对应的各组件下，展现出来静态的目标页面。

将拆分的各组件的代码分别放到各组件的 jsx 文件中，并在 App.js 中使用 `<Header />` 替代源 html 代码。

将拆分的各样式的代码分别放到各组件的 css 文件中。

注意，引入组件及其样式。

### 3 实现动态组件

#### 3.1 动态显示初始化数据

动态加载页面上展示的初始化数据。

##### 3.1.1 数据类型

状态使用什么数据类型，数组？对象？

##### 3.1.2 数据名称

##### 3.1.2 保存在哪个组件

考虑状态放在哪个组件上。

#### 3.2 交互

从绑定事件监听开始分析。

比如，要为一个 `<li>` 设置一个功能：鼠标移入，让这一条 `<li>` 的背景色改变。

那么，先分析事件，事件是鼠标的移入和移出，那么就可以给这个 `<li>` 绑定移入和移出事件。即：

```html
<li onMouseEnter={this.handlerMouse(true)} onMouseLeave={this.handlerMouse(false)}>

```

绑定事件后，要分析如何定义、操作状态来控制页面效果。（状态在哪个组件上，实际操作状态的方法就在哪个组件上）

因为是移入和移出两种情况，所以可以将状态定义成一个对象，其值是一个布尔值，默认是 false,即 `state = {"mouse":false}`.


状态定义好了之后，就可以考虑如何写事件的函数体。

这里就可以直接在函数体中更新状态即可。即:

```js
	handlerMouse = (flag)=>{
        return ()=>{
            this.setState({"mouse":flag});
        }
    }
````

事件写好了，那么就考虑如何将通过事件控制页面效果，这就是控制 css 样式的参数值。即：

```js
<li style={{ backgroundColor: mouse?'#ddd':'white'}} onMouseEnter={this.handlerMouse(true)} onMouseLeave={this.handlerMouse(false)}>

```